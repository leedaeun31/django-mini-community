<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>{{ room.name }}</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/main.css' %}">
    <link rel="icon" href="data:,">
</head>
<body>
    <header>
        <h2 id="header_title">ğŸŒŸ {{ room.name }} ê²Œì‹œë¬¼ ì—…ë¡œë“œ í˜ì´ì§€ğŸŒŸ</h2>
    </header>
    <hr>
    <nav>
        <ul>
            <li><a href="{% url 'board:room_detail' room.slug %}">ë°©ìœ¼ë¡œ ì´ë™</a></li>
            {% if user == room.created_by %}
                <li><a href="{% url 'board:setting_room' room.slug %}">ë°© ì„¤ì •</a></li>
            {% endif %}
            <li><a href="{% url 'board:leave_room' room.slug %}" onclick="return confirm('ì •ë§ ë°©ì„ ë‚˜ê°€ê² ìŠµë‹ˆê¹Œ?');">ë‚˜ê°€ê¸°</a></li>
            {% if user.is_authenticated %}
                <li class="user-info"><a href="{% url 'user:mypage' %}">{{ user.username }}ë‹˜</a></li>
                <li><a href="{% url 'user:logout' %}">ë¡œê·¸ì•„ì›ƒ</a></li>
            {% else %}
                <li><a href="{% url 'user:login_page' %}">ë¡œê·¸ì¸</a></li>
            {% endif %}
        </ul>
    </nav>
    <hr>
    <div style="max-width: 600px; margin: 30px auto; padding: 20px; border: 1px solid #ddd; border-radius: 10px;">
        <h2 style="text-align: center; margin-bottom: 20px;">ê²Œì‹œê¸€ ì—…ë¡œë“œ</h2>

        <form method="post" enctype="multipart/form-data" style="display: flex; flex-direction: column; gap: 15px;">
            {% csrf_token %}
            <input type="text" name="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”" 
                style="padding: 10px; border: 1px solid #ccc; border-radius: 6px;" required>

            <textarea name="text" placeholder="ê¸€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš” (ì„ íƒì‚¬í•­)" rows="5"
                    style="padding: 10px; border: 1px solid #ccc; border-radius: 6px;"></textarea>

            <input type="file" id="imageInput" name="images" multiple accept="image/*">
            <div id="previewContainer" style="display: flex; gap: 10px; flex-wrap: wrap;"></div>

            <button type="submit" 
                    style="background: pink; border: none; padding: 10px; border-radius: 6px; cursor: pointer;">
                ì—…ë¡œë“œ
            </button>
        </form>
    </div>
</body>
</html>

<script>
    const input = document.getElementById('imageInput');
    const previewContainer = document.getElementById('previewContainer');

    document.getElementById('imageInput').addEventListener('change', function() {
        if (this.files.length > 5) {
            alert("ìµœëŒ€ 5ì¥ê¹Œì§€ ì—…ë¡œë“œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
            this.value = "";  // ì„ íƒ ì·¨ì†Œ
        }
    });


    // â­ ì„ íƒí•œ ì´ë¯¸ì§€ ë¯¸ë¦¬ë³´ê¸°
    input.addEventListener('change', () => {
        previewContainer.innerHTML = '';
        Array.from(input.files).forEach(file => {
            const reader = new FileReader();
            reader.onload = e => {
                const img = document.createElement('img');
                img.src = e.target.result;
                img.style.width = '100px';
                img.style.margin = '5px';
                previewContainer.appendChild(img);
            };
            reader.readAsDataURL(file);
        });
    });
</script>